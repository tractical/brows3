<style>
  .directory {
    font-weight: bold;
    font-size: 110%;
  }
  .file {
    list-style: none;
  }
</style>

<h1>
  <% if params[:prefix].split('/').size > 1 %>
    <% last_prefix = params[:prefix].split('/').last + '/' %>
    <a href="?prefix=<%= params[:prefix].gsub(last_prefix, '') %>"><%= params[:prefix].gsub(last_prefix, '') %></a>
    > <%= last_prefix %>
  <% else %>
    <a href="?prefix=<%= params[:prefix] %>"><%= params[:prefix] %></a>
  <% end %>
</h1>

<ul>
  <% @tree.children.each do |child| %>
    <% if child.has_children? %>
      <li class="directory">
        <a href="?prefix=<%= child.content.key %>">
          <%= child.name %> >
        </a>
      </li>
    <% else %>
      <li class="file">
        <a href="<%= child.content.url(Time.now + 10*60) %>">
        <%= child.name %>
      </a>
      - <a href="/delete?directory=<%= child.content.directory.key %>&key=<%= child.content.key %>">Delete file</a>
    </li>
    <% end %>
  <% end %>
</ul>